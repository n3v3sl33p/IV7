# Реализованные задачи лабораторной работы ИВ7

В ходе выполнения индивидуального варианта **ИВ7 "А что, так можно было?"** были полностью реализованы все **5 обязательных рабочих задач** согласно методическим указаниям:

## ОЗ.П1 - Разработка структуры пикселя и графического контейнера

**Структура пикселя RGB888:**
- Формат: 24 бита (по 8 бит на каждый цветовой канал)
- Компоненты: R (Red), G (Green), B (Blue)
- Диапазон значений: 0-255 для каждого канала
- Реализовано как класс `PixelRGB888` с методами преобразования

**Структура графического контейнера (.img файл):**
- **Блок заголовка** (16 байт):
  - Сигнатура "IMG1" (4 байта) - идентификатор формата
  - Ширина изображения (4 байта, int32)
  - Высота изображения (4 байта, int32)
  - Тип пикселя (4 байта, int32) - значение 1 для RGB888
- **Блок пикселей** (переменный размер):
  - Линейный массив пикселей (ширина × высота)
  - Каждый пиксель: 3 байта (R, G, B)
  - Порядок: построчно слева направо, сверху вниз

## ОЗ.Р1 - Программная логика чтения и записи контейнера

**Реализованные алгоритмы:**

1. **Алгоритм записи** (`SaveToFile`):
   - Создание файлового потока
   - Запись заголовка (сигнатура, размеры, тип)
   - Последовательная запись всех пикселей
   - Закрытие потока с обработкой исключений

2. **Алгоритм чтения** (`LoadFromFile`):
   - Открытие файлового потока
   - Верификация формата по сигнатуре "IMG1"
   - Чтение параметров из заголовка
   - Создание контейнера нужного размера
   - Последовательное чтение пикселей
   - Валидация и обработка ошибок

3. **Алгоритм доступа к пикселю** (`GetPixel`/`SetPixel`):
   - Преобразование 2D координат (x, y) в линейный индекс
   - Формула: `index = y × width + x`
   - Проверка границ изображения
   - Прямой доступ к элементу массива

## ОЗ.Р2 - Программная логика обработки пикселей

**Реализованные операции:**

1. **Выделение пикселя из данных:**
   - Чтение трех последовательных байтов (R, G, B)
   - Создание объекта PixelRGB888
   - Сохранение в массиве Pixels

2. **Преобразование для отображения:**
   - Извлечение компонентов R, G, B из пикселя
   - Создание `System.Drawing.Color` для Windows Forms
   - Метод `Color.FromArgb(R, G, B)`
   - Готовность к отрисовке через GDI+

## ОЗ.Р3 - Разработка приложения и интерфейса

**Основной рабочий цикл приложения:**

1. **Запуск и инициализация:**
   - Создание окна Windows Forms (800×600 пикселей)
   - Инициализация PictureBox для отображения
   - Создание StatusBar для информации
   - Настройка обработчиков событий

2. **Режим ожидания:**
   - Отображение черного экрана
   - Подсказка "Press O to open" в статусной строке

3. **Загрузка изображения:**
   - Диалог выбора файла (фильтр `*.img`)
   - Верификация формата
   - Загрузка данных в память
   - Переход в режим просмотра

4. **Режим просмотра:**
   - Попиксельная отрисовка изображения
   - Центрирование в окне
   - Применение масштаба и смещения
   - Отображение сетки (при масштабе ≥4x)

5. **Интерактивное управление:**
   - **Клавиша O** - открыть файл
   - **+/-** - изменение масштаба (0.1x - 50x)
   - **0** - сброс масштаба и смещения
   - **G** - переключение сетки
   - **ESC** - выход из приложения
   - **Мышь** - перетаскивание изображения
   - **Колесо мыши** - плавное масштабирование

6. **Завершение работы:**
   - Корректное закрытие окна
   - Освобождение ресурсов GDI+
   - Завершение процесса

**Технологии и средства:**
- **Язык:** Microsoft PowerShell 5.1+
- **.NET Framework:** System.Windows.Forms, System.Drawing
- **Windows API** через .NET для работы с файлами и графикой
- **GDI+** для отрисовки пикселей и геометрии

## ОЗ.Д1 - Документирование

**Создана документация включающая:**
- Описание структуры пикселя и контейнера
- Алгоритмы в виде псевдокода
- Полные листинги исходного кода
- Инструкции по запуску и использованию
- Описание горячих клавиш и управления

## Дополнительно реализовано

**Генератор тестовых изображений** (`CreateTestImages_Standalone.ps1`):

1. **Gradient (256×256)** - цветовой градиент RGB
2. **Checkerboard (64×64)** - шахматная доска 8×8 клеток
3. **Color bars (280×100)** - 7 цветных вертикальных полос (радуга)
4. **Circles (200×200)** - концентрические синусоидальные круги
5. **Noise (128×128)** - случайный RGB шум

Все 5 тестовых изображений успешно созданы и готовы к просмотру.

## Результаты

✅ **Все обязательные задачи выполнены**
✅ **Приложение полностью функциональное**
✅ **Создано 5 тестовых изображений**
✅ **Код работает на чистом PowerShell без сторонних зависимостей**
✅ **GUI интерфейс с полным функционалом**
✅ **Реализована обработка ошибок и валидация**

Максимальная оценка за ИВ7: **18 баллов** (+ 6 бонусных за дополнительные задачи) = **24 балла**.